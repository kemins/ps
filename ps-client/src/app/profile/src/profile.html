<div class="container-fluid profile-container">
  <form novalidate [formGroup]="profileForm">
    <div class="form-group" *ngIf="(dirtyAvatar | async)?.m">
      <label class="file-container">
        <img [src]="(dirtyAvatar | async)?.m" class="img-circle img-avatar"
            title="change the avatar"/>
        <form #avatarForm id="avatarForm">
          <input type="file" #file/>
        </form>
      </label>
      <div *ngIf="(isDirtyAvatar | async)">
        <button mat-raised-button color="primary" (click)="uploadAvatar()">Upload</button>
        <button mat-raised-button color="secondary" (click)="resetAvatar()">Cancel</button>
      </div>
    </div>
    <div class="form-group">
      <mat-input-container>
        <input matInput
            placeholder="Name"
            formControlName="displayName"
            name="displayName" id="displayName">
        <mat-error *ngIf="!profileForm.controls.displayName.valid">
          Name is required
        </mat-error>
      </mat-input-container>
    </div>
    <div class="form-group">
      <mat-input-container>
        <input matInput
            placeholder="Email" type="email"
            formControlName="email">
        <mat-error *ngIf="!profileForm.controls.email.valid">
          Email is invalid
        </mat-error>
      </mat-input-container>
    </div>

    <div class="form-group">
      <mat-radio-group formControlName="gender">
        <mat-radio-button value="male">Male</mat-radio-button>
        <mat-radio-button value="female">Female</mat-radio-button>
      </mat-radio-group>
    </div>

    <button mat-raised-button color="primary" (click)="onSubmit()"
        [disabled]="!profileForm.valid">Save
    </button>
  </form>
</div>